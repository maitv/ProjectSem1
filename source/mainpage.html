<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<!--link rel="stylesheet" href="js/jquery.mobile-1.4.2/jquery.mobile-1.4.2.min.css"-->
<script src="js/jquery-1.7.2.min.js"></script>
<!--script src="js/jquery.mobile-1.4.2/jquery.mobile-1.4.2.min.js"></script-->
<script src="js/common.js"></script>
<link rel="stylesheet" href="css/mainpage.css" >

<!-- for datepicker -->
<link rel="stylesheet"  href="js/jquery.mobile-1.4.2/jquery.mobile-1.4.2.css" /> 
<link rel="stylesheet" href="css/jquery.mobile.datepicker.css" />
<script src="js/jquery-1.10.2.js"></script> 
<script src="js/jquery.ui.datepicker.js"></script>
<script src="js/jquery.mobile-1.4.2/jquery.mobile-1.4.2.js"></script> 
<script src="js/jquery.mobile.datepicker.js"></script>

<!-- for draw chart --> 
<script src="js/jscharts.js"></script>

</head>
<body>
    <div id="mainpage" data-role="page" >
        <div data-role="header" data-id="persistheader" 
        data-position="fixed" id="mainpageHeader">
	        <h1 id="accountDisplay">Tài khoản của tôi</h1>
    	</div>
        <div data-role="content" id="mainContent">
            <!--h3>This is main page</h3-->
            <div id="mainView">
            	<div id="addTransactionIcon">
                	<a href="#addTransactionPage" datarel=><img src="images/add_150_150.png" alt="Thêm giao dịch" onClick="resetFields()"/></a>
                	<!--h1><a href="#addTransactionPage">Thêm giao dịch</a></h1-->
                </div>
                <div id="listTransactionIcon">
               	 	<a href="#listTransaction"><img src="images/listTran_150_150.png" alt="Sổ chi tiêu" onClick="resetFields()"/></a>
                	<!--h1>Sổ chi tiêu</h1-->
                </div>
                <div id="listDebtsIcon">
               		<a href="#listDebts"><img src="images/loan_150_150.png" alt="Sổ nợ" onClick="resetFields()"/></a>
                	<!--h1>Sổ nợ</h1-->
                </div>
                <div id="trendsIcon">
	                <a href="#trends"><img src="images/statistic_150_150.png" alt="Thống kê" onClick="resetFields()"/></a>
                	<!--h1>Thống kê</h1-->
                </div>
            </div>
        </div>
        <div data-role="footer" data-id="persistfooter" 
        data-position="fixed" >
        </div>
	</div>
    <div id="addTransactionPage" data-role="page" data-dialog="true" >
        <div data-role="header" data-id="persistheader" 
        data-position="fixed" id="addTransactionPagemainpageHeader">
	        <h1 id="accountDisplay">Thêm giao dịch</h1>
    	</div>
        <div data-role="content" id="addTransactionPagemainContent">
            <div id="addTransactionPagemainView">
            	<form >
                    <select name="category" id="category">
                    </select>
                    <input type="number" id="amount" step="1" min="0" placeholder='Nhập số tiền' >
					<textarea cols="40" rows="8" name="txtNote" id="txtNote" placeholder='Ghi chú' ></textarea>
                    <input type="text" class="date-input" data-role="date" data-inline="false" id="dateTrans" placeholder='Ngày giao dịch'>

            </div>
        </div>
        <div data-role="footer" data-id="persistfooter" 
        data-position="fixed" >
            <div data-role="navbar">
                <ul>
                	<li><!--input type="submit" value="Lưu" onClick="onCreateTransaction()" class="ui-btn ui-icon-delete ui-btn-icon-left"></li-->
                    <a href="#" data-role="button" data-icon="check" onClick="onCreateTransaction()">Lưu</a></li>
                    <li><a href="#mainpage" data-role="button" data-icon="delete" onClick="resetFields()">Hủy bỏ</a></li>
                </ul>
            </div>
                </form>            
        </div>
	</div>
    
    <!-- Information detail transaction-->
    <div data-role="page" data-dialog="true" id="showInformationTransactionPage">
        <div data-role="header">
       		<h1>Chi tiết</h1>
        </div>
        <div 
        <div data-role="main" class="ui-content" align="left">
        	<!--a href="#listTransaction">Đóng lại</a-->
            <p id="dateTransaction"></p>            
            <p id="descriptionTransaction"></p>
            <p id="amoutTransaction"></p>
        </div>
    </div>
    
     <!-- Information detail debt-->
    <div data-role="page" data-dialog="true" id="showInformationDebtPage">
        <div data-role="header">
       		<h1>Chi tiết</h1>
        </div>
        
        <div data-role="main" class="ui-content" align="left">
	        <p id="dateDebt"></p>
            <p id="descriptionDebt"></p>
            <p id="amoutDebt"></p>
        	<!--a href="#listDebts">Đóng lại</a-->
        </div>
    </div>
    
     <div data-role="page" data-dialog="true" id="addTransactionSuccess" data-close-btn="none">
        <div data-role="header">
       		<h1>Thông báo</h1>
        </div>
        
        <div data-role="main" class="ui-content" style="text-align:center">
        	<p>Thêm mới thành công ! </p><a href="#mainpage">Đóng lại</a>
        </div>
    </div>
    
    <!-- list transaction -->
    <div id="listTransaction" data-role="page" >
        <div data-role="header" data-id="persistheader" 
        data-position="fixed" id="listTransactionmainpageHeader">
	        <!--a href="#mainpage" data-icon="arrow-l">Quay lại</a-->
            <a href="#mainpage" data-role="button" data-icon="arrow-l" onClick="resetFields()">Quay lại</a>
	        <h1 id="listTransactionDisplay">Sổ chi tiêu</h1>
            <div data-role="navbar">
                <ul>
                    <li><a href="#" id="previousMonth" data-role="button" data-icon="arrow-l" onClick="onPreviousMonth()">Tháng trước</a></li>
                    <!--li><a href="#" id="currentMonth" onClick="onCurrentMonth()">Tháng này</a></li-->
                    <li><a href="#" id="nextMonth" data-role="button" data-icon="arrow-r" onClick="onNextMonth()">Tháng sau</a></li>
                </ul>
            </div>
    	</div>
        <div data-role="content" id="listTransactionmainContent">
            <!--h3>This is main page</h3-->
            <!--div id="listTransactionmainView">
                <ul data-role="listview" data-inset="true" data-filter="true" id="ulListTransaction">>
                </ul>
            <!--/div-->
        </div>
        <div data-role="footer" data-id="persistfooter" 
        data-position="fixed" >
            <div data-role="navbar">
               
            </div>         
        </div>
	</div>
    
    <!-- list debts -->
    <div id="listDebts" data-role="page" >
        <div data-role="header" data-id="persistheader" 
        data-position="fixed" id="listDebtsmainpageHeader">
	        <a href="#mainpage" data-icon="arrow-l" onClick="resetFields()">Quay lại</a>
	        <h1 id="listDebtsDisplay">Sổ ghi nợ</h1>
            <div data-role="navbar">
                <ul>
                    <li><a href="#" id="previousMonth" data-role="button" data-icon="arrow-l" onClick="onPreviousMonthDebt()">Tháng trước</a></li>
                    <!--li><a href="#" id="currentMonth" onClick="onCurrentMonth()">Tháng này</a></li-->
                    <li><a href="#" id="nextMonth" data-role="button" data-icon="arrow-r" onClick="onNextMonthDebt()">Tháng sau</a></li>
                </ul>
            </div>
    	</div>
        <div data-role="content" id="listDebtsmainContent">
            <!--h3>This is main page</h3-->
            <!--div id="listDebtsmainView">
            </div-->
        </div>
        <div data-role="footer" data-id="persistfooter" 
        data-position="fixed" >
            <div data-role="navbar">
               
            </div>         
        </div>
	</div>
    
    <!-- statistic -->
    <div id="trends" data-role="page" >
        <div data-role="header" data-id="persistheader" 
        data-position="fixed" id="trendsmainpageHeader">
	        <a href="#mainpage" data-icon="arrow-l" onClick="resetFields()">Quay lại</a>
	        <h1 id="accountDisplay">Thống kê</h1>
            <div data-role="navbar">
                <ul>
                    <li><a href="#" id="previousMonth" data-role="button" data-icon="arrow-l" onClick="onPreviousMonthTrend()">Tháng trước</a></li>
                    <!--li><a href="#" id="currentMonth" onClick="onCurrentMonth()">Tháng này</a></li-->
                    <li><a href="#" id="nextMonth" data-role="button" data-icon="arrow-r" onClick="onNextMonthTrend()">Tháng sau</a></li>
                </ul>
            </div>
    	</div>
        <div data-role="content" id="trendsmainContent">
	        <div>
            	<h3 id='currentTimeTrend' style='text-align:center;'>Tháng 5</h3>
            </div>
        	<div id="statistic" style="text-align:left; padding-left:3%; padding-bottom:10%; padding-top:3%;">
				<ul data-role="listview">
                    <li>Tổng thu tháng : <span id="totalIncome">0</span></li>
                    <li>Tổng chi tháng : <span id="totalOutcome">0</span></li>
                    <li>Số dư : <span id="balance" style="color:red">-0</span></li>
                </ul>
            </div>
            <div id="graph">Loading...</div>
        </div>
        <div data-role="footer" data-id="persistfooter" 
        data-position="fixed" >
            <div data-role="navbar">
               
            </div>         
        </div>
	</div>
</body>
</html>
<script>
	$(document).ready(function(){
		//$("#dateTrans").datepicker();
		
		var db = window.openDatabase("myDatabase", "1.0", "My WebSQL database", 5*1024*1024);
		
		if(!db) {
			// Check DB was created
			alert('Your DB was not created this time');
		}
		
		getAccountDisplay(db);
		getCategory(db);	
		getListTransaction();
		getListDebt();
		updateMonthDisplayForTrend();
	});
</script>